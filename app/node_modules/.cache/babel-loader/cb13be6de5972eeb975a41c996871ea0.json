{"remainingRequest":"D:\\Projects\\vueApp\\app\\node_modules\\babel-loader\\lib\\index.js!D:\\Projects\\vueApp\\app\\node_modules\\vue-cli-plugin-quasar\\lib\\loader.js.transform-quasar-imports.js!D:\\Projects\\vueApp\\app\\node_modules\\quasar\\src\\composables\\private\\use-validate.js","dependencies":[{"path":"D:\\Projects\\vueApp\\app\\node_modules\\quasar\\src\\composables\\private\\use-validate.js","mtime":1639146450901},{"path":"D:\\Projects\\vueApp\\app\\babel.config.js","mtime":1639562464370},{"path":"D:\\Projects\\vueApp\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1639146363645},{"path":"D:\\Projects\\vueApp\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":1639146364280},{"path":"D:\\Projects\\vueApp\\app\\node_modules\\vue-cli-plugin-quasar\\lib\\loader.js.transform-quasar-imports.js","mtime":1639146403065}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgeyByZWYsIGNvbXB1dGVkLCB3YXRjaCwgb25CZWZvcmVVbm1vdW50LCBnZXRDdXJyZW50SW5zdGFuY2UgfSBmcm9tICd2dWUnOwppbXBvcnQgdXNlRm9ybUNoaWxkIGZyb20gJy4uL3VzZS1mb3JtLWNoaWxkLmpzJzsKaW1wb3J0IHsgdGVzdFBhdHRlcm4gfSBmcm9tICcuLi8uLi91dGlscy9wYXR0ZXJucy5qcyc7CnZhciBsYXp5UnVsZXNWYWx1ZXMgPSBbdHJ1ZSwgZmFsc2UsICdvbmRlbWFuZCddOwpleHBvcnQgdmFyIHVzZVZhbGlkYXRlUHJvcHMgPSB7CiAgbW9kZWxWYWx1ZToge30sCiAgZXJyb3I6IHsKICAgIHR5cGU6IEJvb2xlYW4sCiAgICBkZWZhdWx0OiBudWxsCiAgfSwKICBlcnJvck1lc3NhZ2U6IFN0cmluZywKICBub0Vycm9ySWNvbjogQm9vbGVhbiwKICBydWxlczogQXJyYXksCiAgcmVhY3RpdmVSdWxlczogQm9vbGVhbiwKICBsYXp5UnVsZXM6IHsKICAgIHR5cGU6IFtCb29sZWFuLCBTdHJpbmddLAogICAgdmFsaWRhdG9yOiBmdW5jdGlvbiB2YWxpZGF0b3IodikgewogICAgICByZXR1cm4gbGF6eVJ1bGVzVmFsdWVzLmluY2x1ZGVzKHYpOwogICAgfQogIH0KfTsKZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKGZvY3VzZWQsIGlubmVyTG9hZGluZykgewogIHZhciBfZ2V0Q3VycmVudEluc3RhbmNlID0gZ2V0Q3VycmVudEluc3RhbmNlKCksCiAgICAgIHByb3BzID0gX2dldEN1cnJlbnRJbnN0YW5jZS5wcm9wcywKICAgICAgcHJveHkgPSBfZ2V0Q3VycmVudEluc3RhbmNlLnByb3h5OwoKICB2YXIgaW5uZXJFcnJvciA9IHJlZihmYWxzZSk7CiAgdmFyIGlubmVyRXJyb3JNZXNzYWdlID0gcmVmKG51bGwpOwogIHZhciBpc0RpcnR5TW9kZWwgPSByZWYobnVsbCk7CiAgdXNlRm9ybUNoaWxkKHsKICAgIHZhbGlkYXRlOiB2YWxpZGF0ZSwKICAgIHJlc2V0VmFsaWRhdGlvbjogcmVzZXRWYWxpZGF0aW9uCiAgfSk7CiAgdmFyIHZhbGlkYXRlSW5kZXggPSAwLAogICAgICB1bndhdGNoUnVsZXM7CiAgdmFyIGhhc1J1bGVzID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHByb3BzLnJ1bGVzICE9PSB2b2lkIDAgJiYgcHJvcHMucnVsZXMgIT09IG51bGwgJiYgcHJvcHMucnVsZXMubGVuZ3RoID4gMDsKICB9KTsKICB2YXIgaGFzRXJyb3IgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gcHJvcHMuZXJyb3IgPT09IHRydWUgfHwgaW5uZXJFcnJvci52YWx1ZSA9PT0gdHJ1ZTsKICB9KTsKICB2YXIgY29tcHV0ZWRFcnJvck1lc3NhZ2UgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gdHlwZW9mIHByb3BzLmVycm9yTWVzc2FnZSA9PT0gJ3N0cmluZycgJiYgcHJvcHMuZXJyb3JNZXNzYWdlLmxlbmd0aCA+IDAgPyBwcm9wcy5lcnJvck1lc3NhZ2UgOiBpbm5lckVycm9yTWVzc2FnZS52YWx1ZTsKICB9KTsKICB3YXRjaChmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gcHJvcHMubW9kZWxWYWx1ZTsKICB9LCBmdW5jdGlvbiAoKSB7CiAgICB2YWxpZGF0ZUlmTmVlZGVkKCk7CiAgfSk7CiAgd2F0Y2goZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHByb3BzLnJlYWN0aXZlUnVsZXM7CiAgfSwgZnVuY3Rpb24gKHZhbCkgewogICAgaWYgKHZhbCA9PT0gdHJ1ZSkgewogICAgICBpZiAodW53YXRjaFJ1bGVzID09PSB2b2lkIDApIHsKICAgICAgICB1bndhdGNoUnVsZXMgPSB3YXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gcHJvcHMucnVsZXM7CiAgICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFsaWRhdGVJZk5lZWRlZCh0cnVlKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSBlbHNlIGlmICh1bndhdGNoUnVsZXMgIT09IHZvaWQgMCkgewogICAgICB1bndhdGNoUnVsZXMoKTsKICAgICAgdW53YXRjaFJ1bGVzID0gdm9pZCAwOwogICAgfQogIH0sIHsKICAgIGltbWVkaWF0ZTogdHJ1ZQogIH0pOwogIHdhdGNoKGZvY3VzZWQsIGZ1bmN0aW9uICh2YWwpIHsKICAgIGlmIChwcm9wcy5sYXp5UnVsZXMgIT09ICdvbmRlbWFuZCcpIHsKICAgICAgaWYgKHZhbCA9PT0gdHJ1ZSkgewogICAgICAgIGlmIChpc0RpcnR5TW9kZWwudmFsdWUgPT09IG51bGwpIHsKICAgICAgICAgIGlzRGlydHlNb2RlbC52YWx1ZSA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChpc0RpcnR5TW9kZWwudmFsdWUgPT09IGZhbHNlICYmIGhhc1J1bGVzLnZhbHVlID09PSB0cnVlKSB7CiAgICAgICAgaXNEaXJ0eU1vZGVsLnZhbHVlID0gdHJ1ZTsKICAgICAgICB2YWxpZGF0ZSgpOwogICAgICB9CiAgICB9CiAgfSk7CgogIGZ1bmN0aW9uIHJlc2V0VmFsaWRhdGlvbigpIHsKICAgIHZhbGlkYXRlSW5kZXgrKzsKICAgIGlubmVyTG9hZGluZy52YWx1ZSA9IGZhbHNlOwogICAgaXNEaXJ0eU1vZGVsLnZhbHVlID0gbnVsbDsKICAgIGlubmVyRXJyb3IudmFsdWUgPSBmYWxzZTsKICAgIGlubmVyRXJyb3JNZXNzYWdlLnZhbHVlID0gbnVsbDsKICB9CiAgLyoKICAgKiBSZXR1cm4gdmFsdWUKICAgKiAgIC0gdHJ1ZSAodmFsaWRhdGlvbiBzdWNjZWVkZWQpCiAgICogICAtIGZhbHNlICh2YWxpZGF0aW9uIGZhaWxlZCkKICAgKiAgIC0gUHJvbWlzZSAocGVuZGluZyBhc3luYyB2YWxpZGF0aW9uKQogICAqLwoKCiAgZnVuY3Rpb24gdmFsaWRhdGUoKSB7CiAgICB2YXIgdmFsID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBwcm9wcy5tb2RlbFZhbHVlOwoKICAgIGlmIChoYXNSdWxlcy52YWx1ZSAhPT0gdHJ1ZSkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICB2YWxpZGF0ZUluZGV4Kys7CgogICAgaWYgKGlubmVyTG9hZGluZy52YWx1ZSAhPT0gdHJ1ZSAmJiBwcm9wcy5sYXp5UnVsZXMgIT09IHRydWUpIHsKICAgICAgaXNEaXJ0eU1vZGVsLnZhbHVlID0gdHJ1ZTsKICAgIH0KCiAgICB2YXIgdXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKGVyciwgbXNnKSB7CiAgICAgIGlmIChpbm5lckVycm9yLnZhbHVlICE9PSBlcnIpIHsKICAgICAgICBpbm5lckVycm9yLnZhbHVlID0gZXJyOwogICAgICB9CgogICAgICB2YXIgbSA9IG1zZyB8fCB2b2lkIDA7CgogICAgICBpZiAoaW5uZXJFcnJvck1lc3NhZ2UudmFsdWUgIT09IG0pIHsKICAgICAgICBpbm5lckVycm9yTWVzc2FnZS52YWx1ZSA9IG07CiAgICAgIH0KCiAgICAgIGlmIChpbm5lckxvYWRpbmcudmFsdWUgIT09IGZhbHNlKSB7CiAgICAgICAgaW5uZXJMb2FkaW5nLnZhbHVlID0gZmFsc2U7CiAgICAgIH0KICAgIH07CgogICAgdmFyIHByb21pc2VzID0gW107CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5ydWxlcy5sZW5ndGg7IGkrKykgewogICAgICB2YXIgcnVsZSA9IHByb3BzLnJ1bGVzW2ldOwogICAgICB2YXIgcmVzID0gdm9pZCAwOwoKICAgICAgaWYgKHR5cGVvZiBydWxlID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgcmVzID0gcnVsZSh2YWwpOwogICAgICB9IGVsc2UgaWYgKHR5cGVvZiBydWxlID09PSAnc3RyaW5nJyAmJiB0ZXN0UGF0dGVybltydWxlXSAhPT0gdm9pZCAwKSB7CiAgICAgICAgcmVzID0gdGVzdFBhdHRlcm5bcnVsZV0odmFsKTsKICAgICAgfQoKICAgICAgaWYgKHJlcyA9PT0gZmFsc2UgfHwgdHlwZW9mIHJlcyA9PT0gJ3N0cmluZycpIHsKICAgICAgICB1cGRhdGUodHJ1ZSwgcmVzKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0gZWxzZSBpZiAocmVzICE9PSB0cnVlICYmIHJlcyAhPT0gdm9pZCAwKSB7CiAgICAgICAgcHJvbWlzZXMucHVzaChyZXMpOwogICAgICB9CiAgICB9CgogICAgaWYgKHByb21pc2VzLmxlbmd0aCA9PT0gMCkgewogICAgICB1cGRhdGUoZmFsc2UpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBpZiAoaW5uZXJMb2FkaW5nLnZhbHVlICE9PSB0cnVlKSB7CiAgICAgIGlubmVyTG9hZGluZy52YWx1ZSA9IHRydWU7CiAgICB9CgogICAgdmFyIGluZGV4ID0gdmFsaWRhdGVJbmRleDsKICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIGlmIChpbmRleCAhPT0gdmFsaWRhdGVJbmRleCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICBpZiAocmVzID09PSB2b2lkIDAgfHwgQXJyYXkuaXNBcnJheShyZXMpID09PSBmYWxzZSB8fCByZXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdXBkYXRlKGZhbHNlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgdmFyIG1zZyA9IHJlcy5maW5kKGZ1bmN0aW9uIChyKSB7CiAgICAgICAgcmV0dXJuIHIgPT09IGZhbHNlIHx8IHR5cGVvZiByID09PSAnc3RyaW5nJzsKICAgICAgfSk7CiAgICAgIHVwZGF0ZShtc2cgIT09IHZvaWQgMCwgbXNnKTsKICAgICAgcmV0dXJuIG1zZyA9PT0gdm9pZCAwOwogICAgfSwgZnVuY3Rpb24gKGUpIHsKICAgICAgaWYgKGluZGV4ID09PSB2YWxpZGF0ZUluZGV4KSB7CiAgICAgICAgY29uc29sZS5lcnJvcihlKTsKICAgICAgICB1cGRhdGUodHJ1ZSk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gdmFsaWRhdGVJZk5lZWRlZChjaGFuZ2VkUnVsZXMpIHsKICAgIGlmIChoYXNSdWxlcy52YWx1ZSA9PT0gdHJ1ZSAmJiBwcm9wcy5sYXp5UnVsZXMgIT09ICdvbmRlbWFuZCcgJiYgKGlzRGlydHlNb2RlbC52YWx1ZSA9PT0gdHJ1ZSB8fCBwcm9wcy5sYXp5UnVsZXMgIT09IHRydWUgJiYgY2hhbmdlZFJ1bGVzICE9PSB0cnVlKSkgewogICAgICB2YWxpZGF0ZSgpOwogICAgfQogIH0KCiAgb25CZWZvcmVVbm1vdW50KGZ1bmN0aW9uICgpIHsKICAgIHVud2F0Y2hSdWxlcyAhPT0gdm9pZCAwICYmIHVud2F0Y2hSdWxlcygpOwogIH0pOyAvLyBleHBvc2UgcHVibGljIG1ldGhvZHMgJiBwcm9wcwoKICBPYmplY3QuYXNzaWduKHByb3h5LCB7CiAgICByZXNldFZhbGlkYXRpb246IHJlc2V0VmFsaWRhdGlvbiwKICAgIHZhbGlkYXRlOiB2YWxpZGF0ZQogIH0pOwogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm94eSwgJ2hhc0Vycm9yJywgewogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiBoYXNFcnJvci52YWx1ZTsKICAgIH0KICB9KTsKICByZXR1cm4gewogICAgaXNEaXJ0eU1vZGVsOiBpc0RpcnR5TW9kZWwsCiAgICBoYXNSdWxlczogaGFzUnVsZXMsCiAgICBoYXNFcnJvcjogaGFzRXJyb3IsCiAgICBjb21wdXRlZEVycm9yTWVzc2FnZTogY29tcHV0ZWRFcnJvck1lc3NhZ2UsCiAgICB2YWxpZGF0ZTogdmFsaWRhdGUsCiAgICByZXNldFZhbGlkYXRpb246IHJlc2V0VmFsaWRhdGlvbgogIH07Cn0="},{"version":3,"sources":["D:/Projects/vueApp/app/node_modules/quasar/src/composables/private/use-validate.js"],"names":["ref","computed","watch","onBeforeUnmount","getCurrentInstance","useFormChild","testPattern","lazyRulesValues","useValidateProps","modelValue","error","type","Boolean","default","errorMessage","String","noErrorIcon","rules","Array","reactiveRules","lazyRules","validator","v","includes","focused","innerLoading","props","proxy","innerError","innerErrorMessage","isDirtyModel","validate","resetValidation","validateIndex","unwatchRules","hasRules","length","hasError","value","computedErrorMessage","validateIfNeeded","val","immediate","update","err","msg","m","promises","i","rule","res","push","index","Promise","all","then","isArray","find","r","e","console","changedRules","Object","assign","defineProperty","get"],"mappings":"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","sourcesContent":["import { ref, computed, watch, onBeforeUnmount, getCurrentInstance } from 'vue'\n\nimport useFormChild from '../use-form-child.js'\nimport { testPattern } from '../../utils/patterns.js'\n\nconst lazyRulesValues = [ true, false, 'ondemand' ]\n\nexport const useValidateProps = {\n  modelValue: {},\n\n  error: {\n    type: Boolean,\n    default: null\n  },\n  errorMessage: String,\n  noErrorIcon: Boolean,\n\n  rules: Array,\n  reactiveRules: Boolean,\n  lazyRules: {\n    type: [ Boolean, String ],\n    validator: v => lazyRulesValues.includes(v)\n  }\n}\n\nexport default function (focused, innerLoading) {\n  const { props, proxy } = getCurrentInstance()\n\n  const innerError = ref(false)\n  const innerErrorMessage = ref(null)\n  const isDirtyModel = ref(null)\n\n  useFormChild({ validate, resetValidation })\n\n  let validateIndex = 0, unwatchRules\n\n  const hasRules = computed(() =>\n    props.rules !== void 0\n    && props.rules !== null\n    && props.rules.length > 0\n  )\n\n  const hasError = computed(() =>\n    props.error === true || innerError.value === true\n  )\n\n  const computedErrorMessage = computed(() => (\n    typeof props.errorMessage === 'string' && props.errorMessage.length > 0\n      ? props.errorMessage\n      : innerErrorMessage.value\n  ))\n\n  watch(() => props.modelValue, () => {\n    validateIfNeeded()\n  })\n\n  watch(() => props.reactiveRules, val => {\n    if (val === true) {\n      if (unwatchRules === void 0) {\n        unwatchRules = watch(() => props.rules, () => {\n          validateIfNeeded(true)\n        })\n      }\n    }\n    else if (unwatchRules !== void 0) {\n      unwatchRules()\n      unwatchRules = void 0\n    }\n  }, { immediate: true })\n\n  watch(focused, val => {\n    if (props.lazyRules !== 'ondemand') {\n      if (val === true) {\n        if (isDirtyModel.value === null) {\n          isDirtyModel.value = false\n        }\n      }\n      else if (isDirtyModel.value === false && hasRules.value === true) {\n        isDirtyModel.value = true\n        validate()\n      }\n    }\n  })\n\n  function resetValidation () {\n    validateIndex++\n    innerLoading.value = false\n    isDirtyModel.value = null\n    innerError.value = false\n    innerErrorMessage.value = null\n  }\n\n  /*\n   * Return value\n   *   - true (validation succeeded)\n   *   - false (validation failed)\n   *   - Promise (pending async validation)\n   */\n  function validate (val = props.modelValue) {\n    if (hasRules.value !== true) {\n      return true\n    }\n\n    validateIndex++\n\n    if (innerLoading.value !== true && props.lazyRules !== true) {\n      isDirtyModel.value = true\n    }\n\n    const update = (err, msg) => {\n      if (innerError.value !== err) {\n        innerError.value = err\n      }\n\n      const m = msg || void 0\n\n      if (innerErrorMessage.value !== m) {\n        innerErrorMessage.value = m\n      }\n\n      if (innerLoading.value !== false) {\n        innerLoading.value = false\n      }\n    }\n\n    const promises = []\n\n    for (let i = 0; i < props.rules.length; i++) {\n      const rule = props.rules[ i ]\n      let res\n\n      if (typeof rule === 'function') {\n        res = rule(val)\n      }\n      else if (typeof rule === 'string' && testPattern[ rule ] !== void 0) {\n        res = testPattern[ rule ](val)\n      }\n\n      if (res === false || typeof res === 'string') {\n        update(true, res)\n        return false\n      }\n      else if (res !== true && res !== void 0) {\n        promises.push(res)\n      }\n    }\n\n    if (promises.length === 0) {\n      update(false)\n      return true\n    }\n\n    if (innerLoading.value !== true) {\n      innerLoading.value = true\n    }\n\n    const index = validateIndex\n\n    return Promise.all(promises).then(\n      res => {\n        if (index !== validateIndex) {\n          return true\n        }\n\n        if (res === void 0 || Array.isArray(res) === false || res.length === 0) {\n          update(false)\n          return true\n        }\n\n        const msg = res.find(r => r === false || typeof r === 'string')\n        update(msg !== void 0, msg)\n        return msg === void 0\n      },\n      e => {\n        if (index === validateIndex) {\n          console.error(e)\n          update(true)\n          return false\n        }\n\n        return true\n      }\n    )\n  }\n\n  function validateIfNeeded (changedRules) {\n    if (\n      hasRules.value === true\n      && props.lazyRules !== 'ondemand'\n      && (isDirtyModel.value === true || (props.lazyRules !== true && changedRules !== true))\n    ) {\n      validate()\n    }\n  }\n\n  onBeforeUnmount(() => {\n    unwatchRules !== void 0 && unwatchRules()\n  })\n\n  // expose public methods & props\n  Object.assign(proxy, { resetValidation, validate })\n  Object.defineProperty(proxy, 'hasError', {\n    get: () => hasError.value\n  })\n\n  return {\n    isDirtyModel,\n    hasRules,\n    hasError,\n    computedErrorMessage,\n\n    validate,\n    resetValidation\n  }\n}\n"]}]}